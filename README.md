# Система управления заказами: «Заказы МКЛ» и «Заказы Меридиан»

Современное настольное приложение на PySide6 с локальной базой данных SQLite и Material Design темами (qt-material).

## Установка

1. Установите Python 3.9+ (Windows/macOS/Linux).
2. Создайте и активируйте виртуальное окружение (рекомендуется):

- Windows (PowerShell):
  - `python -m venv .venv`
  - `.\.venv\Scripts\Activate.ps1`

- macOS/Linux (bash/zsh):
  - `python3 -m venv .venv`
  - `source .venv/bin/activate`

3. Установите зависимости:
   - `pip install -r requirements.txt`

Если команда `pip` не распознается на Windows — используйте:
- `py -m pip install -r requirements.txt`

## Запуск

- `python order_manager/main.py`
- или (Windows): `py order_manager\main.py`

## Возможности

### Заказы МКЛ
- Управление клиентами: добавление, редактирование, удаление
- Управление товарами: добавление, редактирование, удаление
  - Товар можно добавлять без характеристик
- Создание заказов:
  - Характеристики линз (SPH, CYL, AX, BC) и количество задаются на уровне заказа
  - Статус: Не заказан, Заказан, Прозвонен, Вручен
- Редактирование характеристик и статуса заказа
- Поиск по ФИО клиента или номеру телефона
- Сортировка/фильтр по статусам
- Цветовая подсветка строк по статусам
- Экспорт заказов выбранного статуса в текстовый файл:
  - Выбор разделителя (по умолчанию «|»)
  - Включение/отключение заголовков
  - Имя файла с датой/временем

### Заказы Меридиан
- Заказы с номерами
- Добавление множества товаров в один заказ
- Управление товарами (название, SPH, CYL, AX, количество)
- Статусы: Заказан / Не заказан
- Цветовая подсветка в таблице по статусу
- Экспорт незаказанных товаров:
  - Выбор разделителя
  - Заголовки
  - Имя файла с датой/временем

### Интерфейс
- Темы оформления (Material Design): Меню «Настройки» → «Тема оформления»
- Справка: Меню «Справка» → «Показать справку»

## Валидация
- SPH: от -30.0 до +30.0, шаг 0.25
- CYL: от -10.0 до +10.0, шаг 0.25 (или пусто)
- AX: от 0 до 180 (или пусто)
- BC: от 8.0 до 9.0, шаг 0.1 (или пусто)
- Количество: от 1 до 20

> Примечание: проверка шага BC устойчива к значениям вида 8.50, 8.60 и т.п.

## Файл базы данных
- Создается автоматически: `order_manager/orders.sqlite3`
- Миграция добавляет новые поля для характеристик на уровне заказов МКЛ.

## Упаковка в исполняемый файл
По запросу можно добавить сборку в один exe (Windows) или app (macOS) с помощью PyInstaller.